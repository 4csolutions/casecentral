{
  "version": 3,
  "sources": ["../../../../../apps/casecentral/casecentral/public/js/task_quick_entry.js"],
  "sourcesContent": ["frappe.provide('frappe.ui.form');\r\n\r\nfrappe.ui.form.TaskQuickEntryForm = class TaskQuickEntryForm extends frappe.ui.form.QuickEntryForm {\r\n\tconstructor(doctype, after_insert, init_callback, doc, force) {\r\n\t\tsuper(doctype, after_insert, init_callback, doc, force);\r\n\t\tthis.skip_redirect_on_error = true;\r\n\t}\r\n\r\n\trender_dialog() {\r\n\t\tthis.mandatory = this.mandatory.concat(this.get_variant_fields());\r\n        super.render_dialog();\r\n        const taskTypeField = this.dialog.get_field('type');\r\n        const subjectField = this.dialog.get_field('subject');\r\n\r\n        if(this.doc.matter) {\r\n            frappe.db.get_value('Matter', this.doc.matter, 'matter_type', (r) => {\r\n                if(r && r.matter_type) {\r\n                    taskTypeField.df.get_query = () => {\r\n                        return {\r\n                            filters: {\r\n                                'matter_type': r.matter_type\r\n                            }\r\n                        };\r\n                    };\r\n                }\r\n            });   \r\n        }\r\n        \r\n        taskTypeField.df.onchange = () => {\r\n            const selectedTaskType = taskTypeField.get_value();\r\n            if (selectedTaskType) {\r\n                frappe.model.with_doc('Task Type', selectedTaskType, () => {\r\n                    const taskType = frappe.get_doc('Task Type', selectedTaskType);\r\n                    subjectField.set_value(taskType.description);\r\n                });\r\n            } else {\r\n                subjectField.set_value('');\r\n            }\r\n        };\r\n\t}\r\n\r\n\tget_variant_fields() {\r\n\t\tvar variant_fields = [{\r\n            fieldtype: \"MultiSelectPills\",\r\n            fieldname: \"assign_to\",\r\n            label: __(\"Assign To\"),\r\n            get_data: function (txt) {\r\n                return frappe.db.get_link_options(\"User\", txt, {\r\n                    user_type: \"System User\",\r\n                    enabled: 1,\r\n                });\r\n            },\r\n        }];\r\n\r\n        return variant_fields;\r\n    }\r\n}"],
  "mappings": ";;AAAA,SAAO,QAAQ,gBAAgB;AAE/B,SAAO,GAAG,KAAK,qBAAqB,MAAM,2BAA2B,OAAO,GAAG,KAAK,eAAe;AAAA,IAClG,YAAY,SAAS,cAAc,eAAe,KAAK,OAAO;AAC7D,YAAM,SAAS,cAAc,eAAe,KAAK,KAAK;AACtD,WAAK,yBAAyB;AAAA,IAC/B;AAAA,IAEA,gBAAgB;AACf,WAAK,YAAY,KAAK,UAAU,OAAO,KAAK,mBAAmB,CAAC;AAC1D,YAAM,cAAc;AACpB,YAAM,gBAAgB,KAAK,OAAO,UAAU,MAAM;AAClD,YAAM,eAAe,KAAK,OAAO,UAAU,SAAS;AAEpD,UAAG,KAAK,IAAI,QAAQ;AAChB,eAAO,GAAG,UAAU,UAAU,KAAK,IAAI,QAAQ,eAAe,CAAC,MAAM;AACjE,cAAG,KAAK,EAAE,aAAa;AACnB,0BAAc,GAAG,YAAY,MAAM;AAC/B,qBAAO;AAAA,gBACH,SAAS;AAAA,kBACL,eAAe,EAAE;AAAA,gBACrB;AAAA,cACJ;AAAA,YACJ;AAAA,UACJ;AAAA,QACJ,CAAC;AAAA,MACL;AAEA,oBAAc,GAAG,WAAW,MAAM;AAC9B,cAAM,mBAAmB,cAAc,UAAU;AACjD,YAAI,kBAAkB;AAClB,iBAAO,MAAM,SAAS,aAAa,kBAAkB,MAAM;AACvD,kBAAM,WAAW,OAAO,QAAQ,aAAa,gBAAgB;AAC7D,yBAAa,UAAU,SAAS,WAAW;AAAA,UAC/C,CAAC;AAAA,QACL,OAAO;AACH,uBAAa,UAAU,EAAE;AAAA,QAC7B;AAAA,MACJ;AAAA,IACP;AAAA,IAEA,qBAAqB;AACpB,UAAI,iBAAiB,CAAC;AAAA,QACZ,WAAW;AAAA,QACX,WAAW;AAAA,QACX,OAAO,GAAG,WAAW;AAAA,QACrB,UAAU,SAAU,KAAK;AACrB,iBAAO,OAAO,GAAG,iBAAiB,QAAQ,KAAK;AAAA,YAC3C,WAAW;AAAA,YACX,SAAS;AAAA,UACb,CAAC;AAAA,QACL;AAAA,MACJ,CAAC;AAED,aAAO;AAAA,IACX;AAAA,EACJ;",
  "names": []
}
